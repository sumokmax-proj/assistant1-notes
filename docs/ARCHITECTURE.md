# ARCHITECTURE.md — 기술 설계

---

## 설계 원칙

1. **플랫폼 비종속:** 특정 벤더(Conway 등)에 종속되지 않음
2. **무료 우선:** 유료 서비스는 무료 대안 검토 후 도입
3. **점진적 자동화:** 처음엔 수동, 검증 후 자동화
4. **이식 가능성:** 어느 서버에서도 동일하게 실행 가능

---

## 전체 구조

```
┌─────────────────────────────────────────────────────┐
│                   Operator (인간)                    │
│         계좌 / 지갑 / 법적 계약 / 최종 승인          │
└─────────────────┬───────────────────────────────────┘
                  │ 승인 게이트
┌─────────────────▼───────────────────────────────────┐
│                  Claude (AI Navigator)               │
│      전략 / 코드 작성 / 분석 / 문서 / 점검            │
└────┬────────────┬───────────────┬───────────────────┘
     │            │               │
[인프라 층]  [수익 층]       [결제 층]
```

---

## 인프라 층

### Phase 1 (현재): 최소 인프라
```
로컬 개발 환경 (이 서버)
    └── Claude가 코드/콘텐츠 생성
    └── Operator가 플랫폼에 직접 업로드
```
- 추가 서버 불필요
- 비용: $0

### Phase 2: 자동화 인프라
```
경량 서버 (무료 플랜 우선)
├── Railway.app     → 무료 $5 크레딧/월
├── Fly.io          → 무료 플랜 (소형 앱)
├── Render.com      → 무료 플랜 (슬립 있음)
└── Vercel          → 무료 플랜 (정적/엣지)
```

### Phase 3: 안정 인프라
```
VPS 직접 운영
├── Hetzner Cloud    → €3.29/월 (가장 저렴한 VPS)
├── Vultr            → $2.50/월
└── DigitalOcean     → $4/월
```

---

## 수익 플랫폼 층

### 디지털 제품 판매
```
Gumroad (무료 플랜)
├── 수수료: 판매금액의 10%
├── 결제: Stripe/PayPal 연동 (Operator 승인)
└── 기능: 파일 판매, 구독, 멤버십

대안:
├── Lemonsqueezy  → 수수료 5% + $0.50
├── Payhip        → 무료 플랜 (5% 수수료)
└── Ko-fi         → 무료 (5% 수수료)
```

### 서비스 판매 (Phase 2 이후)
```
Stripe Connect (API 결제)
├── 수수료: 2.9% + $0.30
└── 조건: 사업자 또는 개인 계좌 연동
```

---

## 결제 층

### 법정화폐 경로 (권장: Phase 1)
```
구매자 → Gumroad → Operator 계좌
         (자동 정산, 주 단위)
```
- 설정: Operator가 은행계좌/PayPal 연동 (승인 필요)

### 크립토 경로 (보조 수단)
```
구매자 → Operator 지갑 주소 → 직접 수령
         (USDC on Base 권장: 수수료 $0.01 미만)
```
- 필요: MetaMask 또는 Coinbase Wallet
- 이점: 즉시 수령, 수수료 최소

---

## AI 도구 스택

### 추론 (현재)
- Claude Sonnet 4.6 (이 대화)
- 필요 시: GPT-4o, Gemini Flash (비용 비교 후 선택)

### 개발 도구
```
언어:      Python 3.11+, Node.js 20+
패키지:    pip, npm/pnpm
버전관리:  git
DB:        SQLite (로컬), PlanetScale 무료 (클라우드)
```

### 자동화 도구 (Phase 2)
```
스케줄링:  cron (서버), GitHub Actions (무료)
모니터링:  간단한 health check 스크립트
알림:      Telegram Bot (무료)
```

---

## 데이터 관리

```
/home/ubuntu/hustle1/
├── docs/              ← 이 문서들
├── products/          ← 제작한 디지털 제품
├── src/               ← 서비스 소스 코드
├── scripts/           ← 자동화 스크립트
└── data/
    ├── revenue.csv    ← 수익 기록
    └── expenses.csv   ← 지출 기록
```

---

## 보안 원칙

- API 키, 비밀번호는 절대 코드에 하드코딩 금지
- `.env` 파일 사용, `.gitignore`에 반드시 포함
- Operator만 실제 자격증명 보유
- Claude는 자격증명 없이 로직만 작성

---

## 확장 로드맵

```
Phase 0 (현재)     → 수동: Claude 생성 → Operator 업로드
Phase 1 (검증)     → 반자동: 일부 스크립트 자동화
Phase 2 (시스템화) → 자동: API + 스케줄러 운영
Phase 3 (자립)     → 완전 자동: 수익으로 인프라 자동 결제
```
